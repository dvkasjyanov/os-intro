---
# Front matter
lang: ru-RU
title: "Отчёт лабораторной работы №8"
subtitle: "Дисциплина: Операционные системы"
author: "Касьянов Даниил Владимирович"

# Formatting
toc-title: "Содержание"
toc: true # Table of contents
toc_depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4paper
documentclass: scrreprt
polyglossia-lang: russian
polyglossia-otherlangs: english
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase
indent: true
pdf-engine: lualatex
header-includes:
  - \linepenalty=10 # the penalty added to the badness of each line within a paragraph (no associated penalty node) Increasing the value makes tex try to have fewer lines in the paragraph.
  - \interlinepenalty=0 # value of the penalty (node) added after each line of a paragraph.
  - \hyphenpenalty=50 # the penalty for line breaking at an automatically inserted hyphen
  - \exhyphenpenalty=50 # the penalty for line breaking at an explicit hyphen
  - \binoppenalty=700 # the penalty for breaking a line at a binary operator
  - \relpenalty=500 # the penalty for breaking a line at a relation
  - \clubpenalty=150 # extra penalty for breaking after first line of a paragraph
  - \widowpenalty=150 # extra penalty for breaking before last line of a paragraph
  - \displaywidowpenalty=50 # extra penalty for breaking before last line before a display math
  - \brokenpenalty=100 # extra penalty for page breaking after a hyphenated line
  - \predisplaypenalty=10000 # penalty for breaking before a display
  - \postdisplaypenalty=0 # penalty for breaking after a display
  - \floatingpenalty = 20000 # penalty for splitting an insertion (can only be split footnote in standard LaTeX)
  - \raggedbottom # or \flushbottom
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Освоение основных возможностей командной оболочки **Midnight Commander**. Приобретение навыков практической работы по просмотру каталогов и файлов; манипуляций с ними.

# Выполнение лабораторной работы

## Задание по *mc*

1. Изучаю информацию о **mc**, вызвав в командной строке `man mc` (Рис. 1, 2).

![](image08/1.png)

(Рисунок 1)

![](image08/2.png)

(Рисунок 2)


2. Запускаю из командной строки **mc** (Рисунок 3).
 
![](image08/3.png)

(Рисунок 3)

Рабочее пространство **Midnight Commander** имеет две панели, отображающие по умолчанию списки файлов двух каталогов. Строку меню можно открыть с помощью клавиши **F9**. В строке меню имеются пять меню: **«Левая панель»**, **«Файл»**, **«Команда»**, **«Настройки»** и **«Правая панель»** (Рис. 4 - 9).

![](image08/4.png)

(Рисунок 4)

![](image08/5.png)

(Рисунок 5)

![](image08/6.png)

(Рисунок 6)

![](image08/7.png)

(Рисунок 7)

![](image08/8.png)

(Рисунок 8)

![](image08/9.png)

(Рисунок 9)

Также с помощью горячих клавиш **F2** и **F1** соответственно можно вызвать **«Меню пользователя»** и **«Помощь»** (Рис. 10, 11).

![](image08/10.png)

(Рисунок 10)

![](image08/11.png)

(Рисунок 11)


3. Выполняю несколько операций в **mc**, используя управляющие клавиши.

* Выделение/отмена выделения файлов осуществляется с помощью клавиши **Insert** (Рис. 12, 13). 

    ![](image08/12.png)

    (Рисунок 12)

    ![](image08/13.png)

    (Рисунок 13)

* Копирование файлов осуществляется с помощью клавиши **F5** (Рисунок 14).

    ![](image08/14.png)

    (Рисунок 14)

* Перемещение файлов осуществляется с помощью клавиши **F6** (Рисунок 15).

    ![](image08/15.png)

    (Рисунок 15)

* Получить информацию о размере и правах доступа на файлы и каталоги можно несколькими способами:

  * «Левая панель» → «Информация» (Рис. 16, 17).

    ![](image08/16.png)

    (Рисунок 16)

    ![](image08/17.png)

    (Рисунок 17)

  * «Левая панель» → «Формат списка», далее необходимо выбрать «Расширенный» (Рис. 18, 19, 20).

    ![](image08/18.png)

    (Рисунок 18)

    ![](image08/19.png)

    (Рисунок 19)

    ![](image08/20.png)

    (Рисунок 20)

  * «Файл» → «Права доступа» (Рис. 21, 22).

    ![](image08/21.png)

    (Рисунок 21)

    ![](image08/22.png)

    (Рисунок 22)

  * «Файл» → «Права (расширенные)» (Рис. 23, 24).

    ![](image08/23.png)

    (Рисунок 23)

    ![](image08/24.png)

    (Рисунок 24)

4. Выполню основные команды меню правой панели.

* «Список файлов» - название файла, его расположение, размер и время правки.

* «Быстрый просмотр» - препросмотр содержания файла (Рис. 25, 26).

    ![](image08/25.png)

    (Рисунок 25)

    ![](image08/26.png)

    (Рисунок 26)

* «Информация» - подробная информация о файле (название, положение, права, владелец и т.д.) (Рис. 27, 28).

    ![](image08/27.png)

    (Рисунок 27)

    ![](image08/28.png)

    (Рисунок 28)

* «Дерево» - просмотр дерева каталогов; расположение файлов в файловой системе (Рис. 29, 30).

    ![](image08/29.png)

    (Рисунок 29)

    ![](image08/30.png)

    (Рисунок 30)

* «Формат списка» - выбор формата, в котором выводится список файлов (Рисунок 31).

    ![](image08/31.png)

    (Рисунок 31)

  * «Формат списка» → «Стандартный» - формат списка по умолчанию (Рисунок 32).

    ![](image08/32.png)

    (Рисунок 32)

  * «Формат списка» → «Укороченный» - вывод только имён файлов и каталогов (Рис. 33, 34).

    ![](image08/33.png)

    (Рисунок 33)

    ![](image08/34.png)

    (Рисунок 34)

  * «Формат списка» → «Расширенный» - подробная информация о файлах, но менее подробная, чем «Информация» (Рис. 35, 36).

    ![](image08/35.png)

    (Рисунок 35)

    ![](image08/36.png)

    (Рисунок 36)

  * «Формат списка» → «Определённый пользователем» - степень подробности устанавливается самим пользователем (Рисунок 37).

    ![](image08/37.png)

    (Рисунок 37)

* «Порядок сортировки» - сортировка файлов и каталогов по критериям (имя, версия, расширение, размер и т.д.) (Рис. 38, 39).

![](image08/38.png)

(Рисунок 38)

![](image08/39.png)

(Рисунок 39)

* «Фильтр» - просмотр названия файлов или каталогов, которые подходят под указанную маску (Рис. 40, 41).

![](image08/40.png)

(Рисунок 40)

![](image08/41.png)

(Рисунок 41)


5. Используя возможности подменю «Файл», выполню:

* Просмотр содержимого текстового файла

  «Файл» → «Просмотр» (Рис. 42, 43).

  ![](image08/42.png)

  (Рисунок 42)

  ![](image08/43.png)

  (Рисунок 43)

* Редактирование содержимого текстового файла (без сохранения результатов редактирования)

  «Файл» → «Правка». Изменю **fuse.conf** на **fusion.conf** (Рис. 44, 45, 46).

  ![](image08/44.png)

  (Рисунок 44)

  ![](image08/45.png)

  (Рисунок 45)

  ![](image08/46.png)

  (Рисунок 46)

* Создание каталога

  «Файл» → «Создание каталога». Создам каталог **lab08** (Рис. 47, 48).

  ![](image08/47.png)

  (Рисунок 47)

  ![](image08/48.png)

  (Рисунок 48)

* Копирование файлов в созданный каталог

  Выделю несколько файлов, используя клавишу Insert. Перейду в «Файл» → «Копирование», в появившемся окне укажу путь к каталогу lab08. Проверю наличие скопированных файлов в каталоге (Рис. 49-52).

  ![](image08/49.png)

  (Рисунок 49)

  ![](image08/50.png)

  (Рисунок 50)

  ![](image08/51.png)

  (Рисунок 51)

  ![](image08/52.png)

  (Рисунок 52)


6. С помощью соответствующих средств подменю **Команда** осуществляю:

* Поиск в файловой системе файла с заданными условиями

  «Команда» → «Поиск файла». Ввожу шаблон имени и содержимое файла. Произвожу поиск файлов с расширениями **.c** и **.cpp**, содержащих строку **main** (Рис. 53-57).

  ![](image08/53.png)

  (Рисунок 53)

  ![](image08/54.png)

  (Рисунок 54)

  ![](image08/55.png)

  (Рисунок 55)

  ![](image08/56.png)

  (Рисунок 56)

  ![](image08/57.png)

  (Рисунок 57)

* Выбор и повторение одной из предыдущих команд

  «Команда» → «История командной строки» (Рис. 58, 59). 

  ![](image08/58.png)

  (Рисунок 58)

  ![](image08/59.png)

  (Рисунок 59)

* Переход в домашний каталог

  «Команда» → «Дерево каталогов». Нужно выбрать домашний каталог, после чего будет осуществлён переход в него (Рис. 60-63).

  ![](image08/60.png)

  (Рисунок 60)

  ![](image08/61.png)

  (Рисунок 61)

  ![](image08/62.png)

  (Рисунок 62)

  ![](image08/63.png)

  (Рисунок 63)

* Анализ файла меню и файла расширений

  * «Команда» → «Редактировать файл меню» - задание с помощью определённого синтаксиса действий при запуске файлов с определённым расширением (Рис. 64, 65, 66).

      ![](image08/64.png)

      (Рисунок 64)

      ![](image08/65.png)

      (Рисунок 65)

      ![](image08/66.png)

      (Рисунок 66)

  * «Команда» → «Редактировать файл расширений» - позволяет отредактировать контекстное меню пользователя (Рис. 67, 68).

      ![](image08/67.png)

      (Рисунок 67)

      ![](image08/68.png)

      (Рисунок 68)   

7. Вызываю подменю **Настройки**. Освою операции, определяющие структуру экрана **mc**.
  
* «Настройки» → «Конфигурация» - настройка работы с панелями (Рис. 69, 70).

  ![](image08/69.png)

  (Рисунок 69)

  ![](image08/70.png)

  (Рисунок 70)

* «Настройки» → «Внешний вид» и «Настройки» → «Настройки панелей» определяют элементы, отображаемые при вызове **mc**, а также геометрию расположения панелей и цветовыделение (Рис. 71-74).

  ![](image08/71.png)

  (Рисунок 71)

  ![](image08/72.png)

  (Рисунок 72)

  ![](image08/73.png)

  (Рисунок 73)

  ![](image08/74.png)

  (Рисунок 74)

* «Настройки» → «Подтверждение» - позволяет установить или убрать вывод окна с запросом подтверждения действий при операциях удаления и перезаписи файлов, а также при выходе из программы (Рис. 75, 76).

  ![](image08/75.png)

  (Рисунок 75)

  ![](image08/76.png)

  (Рисунок 76)

* «Настройки» → «Оформление» - изменение цветовой гаммы визуальной оболочки (Рис. 77, 78).

  ![](image08/77.png)

  (Рисунок 77)

  ![](image08/78.png)

  (Рисунок 78)

* «Настройки» → «Биты символов» - формат обработки информации локальным терминалом (Рис. 79, 80).

  ![](image08/79.png)

  (Рисунок 79)

  ![](image08/80.png)

  (Рисунок 80)

* «Настройки» → «Распознавание клавиш» - тестирование функциональных клавиш, клавиш управления курсором и др. (Рис. 81, 82)
  
  ![](image08/80.png)

  (Рисунок 80)

  ![](image08/81.png)

  (Рисунок 81)

* «Настройки» → «Виртуальные ФС» - настройки виртуальной файловой системы (тайм-аут, пароль и др.) (Рис. 83, 84).

  ![](image08/83.png)

  (Рисунок 83)

  ![](image08/84.png)

  (Рисунок 84)

* «Настройки» → «Сохранить настройки» - сохранение всех изменений (Рис. 85, 86).

  ![](image08/85.png)

  (Рисунок 85)

  ![](image08/86.png)

  (Рисунок 86)


## Задание по встроенному редактору **mc**

1. Создаю текстовой файл **text.txt** (Рисунок 87).

  ![](image08/87.png)

  (Рисунок 87)

2. Открываю файл **text.txt** с помощью встроенного в **mc** редактора (Рисунок 88).

  ![](image08/88.png)

  (Рисунок 88)

3. Вставляю в открытый файл небольшой фрагмент текста, скопированный из Интернета (Рис. 89, 90).

  ![](image08/89.png)

  (Рисунок 89)

  ![](image08/90.png)

  (Рисунок 90)

4. Проделываю с текстом следующие манипуляции, используя горячие клавиши:

4.1. Удаляю строку текста с помощью клавиши **F8** (Рис. 91, 92).

  ![](image08/91.png)

  (Рисунок 91)

  ![](image08/92.png)

  (Рисунок 92)

4.2. Выделю фрагмент текста, нажав **F3** для начала выделения текста и для его окончания, и скопирую его на новую строку, используя клавишу **F5** (Рис. 93, 94).

  ![](image08/93.png)

  (Рисунок 93)

  ![](image08/94.png)

  (Рисунок 94)

4.3. Переношу фрагмент текста на новую строку, используя клавишу **F6** (Рисунок 95).

  ![](image08/95.png)

  (Рисунок 95)

4.4. Сохраню файл, нажав **F2** (Рисунок 96).

  ![](image08/96.png)

  (Рисунок 96)

4.5. Отменю последнее действие, нажав **Ctrl + u** (Рисунок 97).

  ![](image08/97.png)

  (Рисунок 97)

4.6. Перейду в конец файла, нажимая **Ctrl + End** (переход в конец файла) и **Ctrl + x** (переход в конец следующего слова), и напишу **«Евклид»** (Рис. 98, 99).

  ![](image08/98.png)

  (Рисунок 98)

  ![](image08/99.png)

  (Рисунок 99)

4.7. Перейду в начало файла, нажимая **Ctrl + Home** (переход в начало файла) и **Ctrl + z** (переход в начало следующего слова) и напишу **«"Начала" - »** (Рис. 100, 101).

  ![](image08/100.png)

  (Рисунок 100)

  ![](image08/101.png)

  (Рисунок 101)

4.8. Сохраню и закрою файл, нажав **F2** и **F10** (Рисунок 102).

  ![](image08/102.png)

  (Рисунок 102)

5. Открою файл с исходным текстом на языке программирования Python (Рис. 103, 104, 105).

  ![](image08/103.png)

  (Рисунок 103)

  ![](image08/104.png)

  (Рисунок 104)

  ![](image08/105.png)

  (Рисунок 105)

6. Используя меню редактора, отключу подсветку синтаксиса (Рис. 106, 107).

  ![](image08/106.png)

  (Рисунок 106)

  ![](image08/107.png)

  (Рисунок 107)


# Контрольные вопросы 

1) Панели могут дополнительно быть переведены в один из двух режимов: «Информация» или «Дерево». В режиме «Информация» на панель выводятся сведения о файле и текущей файловой системе, расположенных на активной панели. В режиме «Дерево» на одной из панелей выводится структура дерева каталогов.


2) Как с помощью команд **shell**, так и с помощью меню (комбинаций клавиш) **mc** можно выполнить следующие операции с файлами:

* Копирование: **F5**; `cp имя_файла имя_каталога`.

* Перемещение/переименование: **F6**; `mv имя_файла имя_каталога`.

* Cоздание каталога: **F7**; `mkdir имя_каталога»`.

* Удаление: **F8**; `rm имя_файла`.

* Изменение прав доступа: **Сtrl + x**; `chmod u+x имя_файла`.


3) Перейти в строку меню панелей **mc** можно с помощью функциональной клавиши **F9**. В строке меню имеются пять меню: **«Левая панель»**, **«Файл»**, **«Команда»**, **«Настройки»** и **«Правая панель»**. Подпункт меню **«Быстрый просмотр»** позволяет выполнить быстрый просмотр содержимого панели. Подпункт меню **«Информация»** позволяет посмотреть информацию о файле или каталоге. В меню каждой панели можно выбрать **«Формат списка»**:

* Стандартный − выводит список файлов и каталогов с указанием размера и времени правки.

* Ускоренный − позволяет задать число столбцов, на которые разбивается панель при выводе списка имён файлов или каталогов без дополнительной информации.

* Расширенный − помимо названия файла или каталога выводит сведения о правах доступа, владельце, группе, размере, времени правки.

* Определённый пользователем − позволяет вывести те сведения о файле или каталоге, которые задаст сам пользователь. Подпункт меню **«Порядок сортировки»** позволяет задать критерии
сортировки при выводе списка файлов и каталогов: без сортировки, по имени, расширенный, время правки, время доступа, время изменения атрибута, размер, узел.


4) Команды меню **«Файл»**:

* Просмотр (**«F3»**) − позволяет посмотреть содержимое текущего (или выделенного) файла без возможности редактирования.

* Просмотр вывода команды (**«М»** + **«!»**) − функция запроса команды с параметрами (аргумент к текущему выбранному файлу).

* Правка (**«F4»**) − открывает текущий (или выделенный) файл для его редактирования.

* Копирование (**«F5»**) − осуществляет копирование одного или нескольких файлов или каталогов в указанное пользователем во всплывающем окне место.

* Права доступа (**«Ctrl»** + **«x»** **«c»**) − позволяет указать (изменить) права доступа к одному или нескольким файлам или каталогам.

* Жёсткая ссылка (**«Ctrl»** + **«x»** **«l»**) − позволяет создать жёсткую ссылку к текущему (или выделенному) файлу.

* Символическая ссылка (**«Ctrl»** + **«x»** **«s»**) − позволяет создать символическую ссылку к текущему (или выделенному) файлу.

* Владелец/группа (**«Ctrl»** + **«x»** **«o»**) − позволяет задать (изменить) владельца и имя группы для одного или нескольких файлов или каталогов.

* Права (расширенные) − позволяет изменить права доступа и владения для одного или нескольких файлов или каталогов.

* Переименование (**«F6»**) − позволяет переименовать (или переместить) один или несколько файлов или каталогов.

* Создание каталога (**«F7»**) − позволяет создать каталог.

* Удалить (**«F8»**) − позволяет удалить один или несколько файлов или каталогов.

* Выход (**«F10»**) − завершает работу **mc**.


5) В меню **«Команда»** содержатся более общие команды для работы с **mc**.

Меню Команда:

* Дерево каталогов − отображает структуру каталогов системы.

* Поиск файла − выполняет поиск файлов по заданным параметрам.

* Переставить панели − меняет местами левую и правую панели.

* Сравнить каталоги (**«Ctrl»** + **«x»** **«d»**) − сравнивает содержимое двух каталогов.

* Размеры каталогов − отображает размер и время изменения каталога (по умолчанию в **mc** размер каталога корректно не отображается).

* История командной строки − выводит на экран список ранее выполненных в оболочке команд.

* Каталоги быстрого доступа (**«Ctrl»** + **«\»**) − при вызове выполняется быстрая смена текущего каталога на один из заданного списка.

* Восстановление файлов − позволяет восстановить файлы на файловых системах **ext2** и **ext3**.

* Редактировать файл расширений − позволяет задать с помощью определённого синтаксиса действия при запуске файлов с определённым расширением.

* Редактировать файл меню − позволяет отредактировать контекстное меню пользователя, вызываемое по клавише **«F2»**.

* Редактировать файл расцветки имён − позволяет подобрать оптимальную для пользователя расцветку имён файлов в зависимости от их типа.


6) Меню Настройки содержит ряд дополнительных опций по внешнему виду и функциональности **mc**.

Меню Настройки содержит:

* Конфигурация − позволяет скорректировать настройки работы с панелями.

* Внешний вид и Настройки панелей − определяет элементы (строка меню, командная строка, подсказки и прочее), отображаемые при вызове **mc**, а также геометрию расположения панелей и цветовыделение.

* Биты символов − задаёт формат обработки информации локальным терминалом.

* Подтверждение − позволяет установить или убрать вывод окна с запросом подтверждения действий при операциях удаления и перезаписи файлов, а также при выходе из программы.

* Распознание клавиш − диалоговое окно используется для тестирования функциональных клавиш, клавиш управления курсором и др.

* Виртуальные ФС − настройки виртуальной файловой системы: тайм-аут, пароль и др.


7) Функциональные клавиши **mc**:
  
* **«F1»** – вызов контекстно-зависимой подсказки.

* **«F2»** – вызов пользовательского меню с возможностью создания и/или дополнения дополнительных функций.

* **«F3»** – просмотр содержимого файла, на который указывает подсветка в активной панели (без возможности редактирования).

* **«F4»** – вызов встроенного в **mc** редактора для изменения содержания файла, на который указывает подсветка в активной панели.

* **«F5»** – копирование одного или нескольких файлов, отмеченных в первой (активной) панели, в каталог, отображаемый на второй панели.

* **«F6»** – перенос одного или нескольких файлов, отмеченных в первой (активной) панели, в каталог, отображаемый на второй панели.

* **«F7»** – создание подкаталога в каталоге, отображаемом в активной панели.

* **«F8»** – удаление одного или нескольких файлов (каталогов), отмеченных в первой (активной) панели файлов.

* **«F9»** – вызов меню **mc**.

* **«F10»** – выход из **mc**.


8) Встроенный в **mc** редактор вызывается с помощью функциональной клавиши **«F4»**. В нём удобно использовать различные комбинации клавиш при редактировании содержимого (как правило текстового) файла.

Клавиши для редактирования файла:

* **«Ctrl»** + **«y»** − удалить строку.

* **«Ctrl»** + **«u»** − отмена последней операции.

* **«Ins»** вставка/замена.

* **«F7»** − поиск (можно использовать регулярные выражения).

* **«↑»** + **«F7»** − повтор последней операции поиска.

* **«F4»** − замена.

* **«F3»** − первое нажатие − начало выделения, второе − окончание выделения.

* **«F5»** − копировать выделенный фрагмент.

* **«F6»** − переместить выделенный фрагмент.

* **«F8»** − удалить выделенный фрагмент.

* **«F2»** − записать изменения в файл.

* **«F10»** − выйти из редактор.


9) Для редактирования меню пользователя, вызываемого клавишей **«F2»**, необходимо перейти в пункт «Редактировать файл меню» → «Команда» и изменить настройки файла.


10)  Часть команд «Меню пользователя», а также меню «Файл» позволяют выполнять действия, определяемые пользователем, над текущим файлом. Например, копирование каталога или файла, переименование, перемещение, архивирование.

# Выводы

Я освоил основные возможности командной оболочки **Midnight Commander**, приобрёл навыки практической работы по просмотру каталогов и файлов; манипуляций с ними.


# Библиография

[Лабораторная работа №8 - "Командная оболочка Midnight Commander"](https://esystem.rudn.ru/mod/resource/view.php?id=718595)